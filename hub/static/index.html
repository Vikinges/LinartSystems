<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Linart Systems Hub</title>
    <link rel="stylesheet" href="/static/styles.css">
  </head>
  <body>
    <div class="container">
      <header>
        <h1>Linart Systems</h1>
        <p class="lead">Central hub running inside a container. Click logos to open services.</p>
      </header>

      <main>
        <div id="services" class="services">Loading…</div>
        <div style="margin-top:20px">
          <a href="/status">Status page</a>
        </div>
      </main>

      <footer>
        <small>Hosted in Docker. Hub proxies to the microservices by name.</small>
      </footer>
    </div>

    <script>
      async function load(){
        try{
          const r = await fetch('/api/status');
          const j = await r.json();
          const container = document.getElementById('services');
          container.innerHTML = '';
          j.services.forEach(s => {
            const a = document.createElement('a');
            a.className = 'service';
            a.href = (s.prefix || ('/'+s.name));
            a.title = s.displayName || s.name;
            const img = document.createElement('img');
            img.src = '/static/logo1.svg';
            img.alt = s.name + ' logo';
            const div = document.createElement('div');
            div.textContent = (s.displayName || s.name) + ' — ' + (s.description || '');
            a.appendChild(img);
            a.appendChild(div);
            container.appendChild(a);
          });
        }catch(e){
          document.getElementById('services').textContent = 'Error loading services: '+e;
        }
      }
      load();
    </script>
  </body>
  </html>
